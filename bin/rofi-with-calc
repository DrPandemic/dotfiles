#! /bin/bash
#rofi -modi drun,calc -show drun -no-history -no-show-match -no-sort -calc-command "echo '{result}' | wl-copy"
killall rofi
if [ $? -ne 0 ]
then
	SCREEN_POS=$(swaymsg -t get_outputs | jq -r '.[] | select(.focused).rect | "\(.width)x\(.height)\\+\(.x)\\+\(.y)"')

	# ripgrep
	XWAYLAND_OUTPUT=$(xrandr | rg -oP "[A-Z]+[0-9]+(?= [a-z]+ $SCREEN_POS)")

	MONITOR_ID=$(rofi --help | rg $XWAYLAND_OUTPUT -B1 | sed -sr '/ID/!d;s/[^:]*:\s([0-9])/\1/')
	rofi -m $MONITOR_ID -modi drun,calc -show drun -no-show-match -no-disable-history -font "hack 25" -calc-command "echo '{result}' | wl-copy"
fi
