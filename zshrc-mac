source ~/.zprofile

# User configuration
export TERM='screen-256color'

alias htop TERM=screen htop
alias x=startx
alias gclean='git branch --merged master | grep -v "\* master" | grep -v ".*master" | xargs -n 1 git branch -d'
alias ping=prettyping

alias devdus='dev down && dev up && dev s'
alias devdut='dev down && dev up && dev t'
alias devdu='dev down && dev up'
alias devus='dev up && dev s'
alias devst='dev style --include-branch-commits --all-cops'
alias devt='dev t --include-branch-commits '
alias devs='dev s'
alias devu='dev u'
alias devd='dev d'
alias devc='dev c'
alias devuc='dev u && dev c'
alias devduc='dev d && dev u && dev c'
alias devv='dev typecheck && dev style --include-branch-commits && devt'
alias devuv='devu && devv'
alias devuv='devdu && devv'
alias chrome="/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome"

export EDITOR='vim'
export CC=clang
export CXX=clang++

if [[ -z $TMUX ]]; then
  tmux a || tmux
fi

function devdomain() {
  echo "s = OpenSrsDomainSubscription.create!(host: '$1', shop: Shop.first); DomainHandler.create!(host: \"www.#{s.host}\", shop: s.shop, subscription: s); DomainHandler.create!(host: s.host, shop: s.shop, subscription: s); s.update(status: 'registered')" | dev console
}

function :q() {
  exit
}

function pvm() {
  unset -f pvm
  source ~/Projects/pvm/init-pvm.sh
  pvm "$@"
}

function load_nvm {
  unset -f load_node
  unalias node
  unset -f load_npm
  unalias npm
  unset -f nvm
  # [ -s "$NVM_DIR/nvm.sh" ] && . "$NVM_DIR/nvm.sh" # This loads nvm
  source /usr/share/nvm/init-nvm.sh
}

function load_node {
  load_nvm
  node "$@"
}
alias node="load_node"

function load_npm {
  load_nvm
  npm "$@"
}
alias npm="load_npm"

function nvm {
  load_nvm
  nvm "$@"
}

function sed_regex() {
  rg -l "$1" | xargs sed -i '' -e 's|'$1'|'$2'|g'
}

# Theme
source "${ZDOTDIR:-$HOME}/.zprezto/init.zsh"

[ -f /opt/dev/dev.sh ] && source /opt/dev/dev.sh
# export PATH="$HOME/.jenv/bin:$PATH"
# eval "$(jenv init -)"

[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

bindkey -v
bindkey fd vi-cmd-mode
# Timeout after escape
export KEYTIMEOUT=1
bindkey '^E' end-of-line
bindkey '^A' beginning-of-line

